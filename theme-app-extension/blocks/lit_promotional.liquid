<div>
  {% for tag in product.tags %}
    {% if tag == "litpromotional" %}
      <div id="lit-promotional-container" onclick="forwardToLitPromotion()">
        <div class="discount-container">
          <p class="redeem-text"> This product qualifies for a token-based discount!</p>
          <button id="log-discounts" class="redeem-button">
            Click to connect wallet and view discount
          </button>
        </div>
      </div>
      {% endif %}
      {% if tag == "litexclusive" %}
      <div id="lit-promotional-container" onclick="forwardToLitPromotion()">
        <div class="discount-container">
          {{ product.metafields.my_fields.litexclusive.value}}
          <p class="redeem-text"> This product is token-gated and only available to qualified users.</p>
          <button id="log-discounts" class="redeem-button">
            Click to connect wallet and check access
          </button>
        </div>
        <script type="text/javascript">
          console.log('check metafields', "{{ product.metafields }}")
          console.log('check myfields', "{{ product.metafields.my_fields }}")
          const productFormButtons = document.getElementsByClassName("product-form__buttons");
          setTimeout(() => {
            if ("{{ tag }}" === 'litexclusive') {
              console.log('window.load litexclusive')
              for (let i = 0; i < productFormButtons.length; i++) {
                productFormButtons[i].style.display = 'none';
              }
            }
          }, 0)
        </script>
      </div>
    {% endif %}
  {% endfor %}
</div>

{% schema %}
{
"name": "Lit Promotional",
"target": "section",
"javascript": "lit-promotional.js",
"stylesheet": "lit-promotional.css"
}
{% endschema %}


